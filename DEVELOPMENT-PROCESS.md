# 🔄 开发流程规范

**版本：** 1.0.0  
**生效日期：** 2026-02-26  
**适用范围：** 所有备忘录系统改动

---

## 📋 标准开发流程

每次改动必须严格按照以下顺序执行：

```
总控 Agent → 架构 → 开发 → 测试 → 文档 → GitHub 提交
```

---

## 1️⃣ 总控 Agent（Coordinator）

**职责：** 需求分析、任务分解、进度跟踪

**执行内容：**
- [ ] 理解用户需求和改动目标
- [ ] 评估改动范围和影响
- [ ] 创建任务清单
- [ ] 分配给后续角色

**输出：** 任务清单（在任务群聊中同步）

---

## 2️⃣ 架构（Architect）

**职责：** 技术设计、架构评审、安全评估

**执行内容：**
- [ ] 分析技术可行性
- [ ] 设计实现方案
- [ ] 评估安全风险
- [ ] 确定依赖变更
- [ ] 创建技术设计文档（如需要）

**输出：** 
- 技术方案说明
- 影响评估（文件列表、依赖变更）
- 安全风险评估

**检查点：** 架构方案需经总控确认后方可进入开发

---

## 3️⃣ 开发（Developer）

**职责：** 代码实现、单元测试、代码质量

**执行内容：**
- [ ] 按架构方案编写代码
- [ ] 遵循代码规范（TypeScript、Vue 3）
- [ ] 编写单元测试（如适用）
- [ ] 本地构建验证
- [ ] 代码审查（自我审查）

**输出：**
- 源代码变更
- 构建成功验证
- 测试通过结果

**检查点：** 代码必须通过本地构建和测试

---

## 4️⃣ 测试（QA）

**职责：** 功能测试、回归测试、安全验证

**执行内容：**
- [ ] 功能测试（验证改动是否达到目标）
- [ ] 回归测试（确保未破坏现有功能）
- [ ] 安全验证（如改动涉及安全）
- [ ] 性能测试（如改动影响性能）
- [ ] 浏览器兼容性测试（桌面 + 移动）

**输出：**
- 测试报告
- 问题清单（如有）
- 发布建议

**检查点：** 测试通过后方可进入文档阶段

---

## 5️⃣ 文档（Writer）

**职责：** 文档更新、变更日志、用户通知

**执行内容：**
- [ ] 更新 README.md（如功能变更）
- [ ] 更新 SECURITY.md（如安全变更）
- [ ] 编写变更日志
- [ ] 更新 API 文档（如接口变更）
- [ ] 创建升级指南（如需要）

**输出：**
- 更新的文档
- 变更日志
- 用户通知（如需要）

---

## 6️⃣ GitHub 提交

**职责：** 代码提交、版本发布、部署触发

**执行内容：**
- [ ] 编写规范的 commit message
- [ ] 提交到 Git 仓库
- [ ] 推送到 GitHub
- [ ] 验证 Vercel 自动部署
- [ ] 确认部署成功

**Commit Message 规范：**
```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

**Type 类型：**
- `feat`: 新功能
- `fix`: 修复 bug
- `docs`: 文档变更
- `style`: 代码格式
- `refactor`: 重构
- `test`: 测试相关
- `chore`: 构建/工具

**示例：**
```
feat(security): 添加密码哈希和备忘录加密 🔐

- 使用 bcryptjs 进行密码哈希存储
- 使用 crypto-js 实现 AES 加密
- 创建加密工具模块

Closes: #123
```

---

## 📊 流程图

```
┌─────────────┐
│  用户需求   │
└──────┬──────┘
       ▼
┌─────────────┐
│ 总控 Agent  │ ──→ 任务清单
└──────┬──────┘
       ▼
┌─────────────┐
│   架构师    │ ──→ 技术方案
└──────┬──────┘
       ▼
┌─────────────┐
│   开发者    │ ──→ 源代码
└──────┬──────┘
       ▼
┌─────────────┐
│   测试员    │ ──→ 测试报告
└──────┬──────┘
       ▼
┌─────────────┐
│   文档员    │ ──→ 更新文档
└──────┬──────┘
       ▼
┌─────────────┐
│ GitHub 提交 │ ──→ 部署上线
└─────────────┘
```

---

## ✅ 检查清单模板

每次改动前复制此清单并逐项勾选：

```markdown
## 改动检查清单

### 总控
- [ ] 需求理解清晰
- [ ] 任务已分解

### 架构
- [ ] 技术方案已设计
- [ ] 安全风险评估完成
- [ ] 依赖变更已确认

### 开发
- [ ] 代码已实现
- [ ] 本地构建通过
- [ ] 代码规范符合

### 测试
- [ ] 功能测试通过
- [ ] 回归测试通过
- [ ] 安全验证通过（如适用）

### 文档
- [ ] README 已更新
- [ ] 变更日志已编写
- [ ] 相关文档已更新

### 提交
- [ ] Commit message 规范
- [ ] 已推送到 GitHub
- [ ] Vercel 部署成功
```

---

## 🚨 例外情况

**紧急修复（Hotfix）：**
- 可简化流程，但必须包含：开发 → 测试 → 提交
- 事后补充文档和架构说明

**小型改动（文档/拼写）：**
- 可简化为：总控 → 开发 → 提交
- 但仍需测试验证

---

## 📝 变更记录

| 日期 | 版本 | 变更内容 |
|------|------|----------|
| 2026-02-26 | 1.0.0 | 初始版本，建立标准流程 |

---

**批准人：** 翔哥（CTO）  
**最后更新：** 2026-02-26
